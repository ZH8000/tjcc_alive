<!doctype html>

<html>
    <head>
        <meta charset="utf8" />
        <title>machine status</title>
        <style type="text/css">
          .cell { 
            background: #00ff00;
          }
        </style>
        <script src="/jquery-1.11.2.min.js"></script>
        <script src="/socket.io-1.2.1.js"></script>
        <!--
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://cdn.socket.io/socket.io-1.2.1.js"></script>
        -->
        <script>
          var socket = io();
          var pingErrorData;
          var machineErrorData;

          $(window).load(function() {
            var allData;
            var tmp = $.getJSON('ipMapping.json', function(json) {
              allData = json;
              $.each(json, function(index, data) {
                $('#data').append(data);
              });
              return json;
            });

            var row = Math.ceil(23/5);
            var col = 5;
            for (var y = 0; y < row; y++) {
              var content = '<tr>';
              for (var x = 0; x < col; x++) {
                content += '<td class="cell" id="pi_' + (y * row + x)+ '">鎮海' + '</td>'
                // console.log(y * row + x);
              }
              content += '</tr>';
              $('#data table').append(content);
            }

            // console.log("hi");
            /*
            $.getJSON('ipMapping.json', function(json) {
              $.each(json, function(index, json) {
                  $('#pi_' + json.ID).append("振海");
              });
            });
            */
          });

          socket.on('aliveMsg', function(msg) {
            $('.cell').each(function(){
              $(this).css('background', '#00ff00');
            }); // reset all color first
            // console.log("~~~~~>", msg);
          });

          socket.on('errMachineMsg', function(msg) {
            
          });
        </script>
    </head>
    <body>
       <div id="data">
           <table border="1">
               <tbody></tbody>
           </table>
       </div>
    </body
</html>
